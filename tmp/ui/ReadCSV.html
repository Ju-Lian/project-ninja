<!DOCTYPE html>
<meta charset="utf-8">
<html>
<head>
	<title>Margin Volume Chart</title>
	<link rel="stylesheet" type="text/css" href="../style/MarginVolume.css">
</head>
<body>
	<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script> 
	<script src="../lib/MarginVolumeChart.js"></script> 
	
	<script type="text/javascript" >			
		window.onload = function()
		{ 
			var csvFilePath="../data/MarginVolume.csv"; //CSV file
			d3.csv(csvFilePath, function(d) 
			{
				return {
					product: d.Product,
					margin: +d.Margin,
					volume: +d.Volume
				};
			}, 
			function(error, rows) 
			{
				//--> Insert custom function here <--
				// -- d3.csv is an asynchronous function, therefore its data cannot be used in another scope outside the csv-function
				// -- data is stored in rows
				console.log(rows);
				var width = 400;
				var height = 300;
				var svg = d3.select("body").append("svg")
							.attr("width", width)
							.attr("height", height);	

				marginVolumeBars
				({
					svg: svg,
					width: width,
					height: height,
					name: "Margin Quantity Chart",
					padding: 40,
					rangeBandsInnerPadding: .1,
					rangeBandsOuterPadding: .6,
					sortByVolume: true,
					showGridLines: true,
					data: rows
				});
			});
		}
	</script>

</body>

</html> 